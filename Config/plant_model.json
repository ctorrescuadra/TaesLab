{
	"$schema": "http://json-schema.org/draft-07/schema",
	"$ref": "#/definitions/DataModel",
	"definitions": {
		"DataModel": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"ProductiveStructure": {
					"$ref": "#/definitions/ProductiveStructure"
				},
				"ExergyStates": {
					"$ref": "#/definitions/ExergyStates"
				},
				"WasteDefinition": {
					"$ref": "#/definitions/WasteDefinition"
				},
				"ResourcesCost": {
					"$ref": "#/definitions/ResourcesCost"
				},
				"Format": {
					"$ref": "#/definitions/Format"
				}
			},
			"required": [
				"ProductiveStructure",
				"ExergyStates"
			],
			"title": "DataModel",
			"description": "TaesLab plant data model structure"
		},
		"ProductiveStructure": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"name": {
					"$ref": "#/definitions/Text"
				},
				"flows": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Flow"
					}
				},
				"processes": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Process"
					}
				}
			},
			"required": [
				"flows",
				"processes"
			],
			"title": "ProductiveStructure",
			"description": "Productive structure of the plant"	
		},
		"Flow": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"key": {
					"$ref": "#/definitions/Keys"
				},
				"type": {
					"type": "string",
					"enum": [
						"INTERNAL",
						"RESOURCE",
						"OUTPUT",
						"WASTE"
					]
				},
				"description": {
					"$ref": "#/definitions/Text"
				}
			},
			"required": [
				"key",
				"type"
			],
			"title": "Flow",
			"description": "Definition of a flow in the productive structure"
		},
		"Process": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"key": {
					"$ref": "#/definitions/Keys"
				},
				"description": {
					"$ref": "#/definitions/Text"
				},
				"fuel": {
					"$ref": "#/definitions/Text"
				},
				"product": {
					"$ref": "#/definitions/Text"
				},
				"type": {
					"type": "string",
					"enum": [
						"PRODUCTIVE",
						"DISSIPATIVE"
					]
				}
			},
			"required": [
				"key",
				"fuel",
				"product",
				"type"
			],
			"title": "Process",
			"description": "Definition of a process in the productive structure"
		},
		"ExergyStates": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"States": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/State"
					}
				}
			},
			"required": [
				"States"
			],
			"title": "ExergyStates",
			"description": "Collection of exergy states used in the plant model"
		},
		"State": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"stateId": {
					"$ref": "#/definitions/Names"
				},
				"exergy": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Values"
					}
				}
			},
			"required": [
				"exergy",
				"stateId"
			],
			"title": "State",
			"description": "Exergy state definition"	
		},
		"Format": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"definitions": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/FormatDefinition"
					}
				}
			},
			"required": [
				"definitions"
			],
			"title": "Format",
			"description": "Format definitions for displaying data"
		},
		"FormatDefinition": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"key": {
					"type": "string",
					"enum": [
						"EXERGY",
						"EXERGY_COST",
						"EXERGY_UNIT_COST",
						"GENERALIZED_COST",
						"GENERALIZED_UNIT_COST",
						"DIAGNOSIS",
						"GENERALIZED_DIAGNOSIS"
					]
				},
				"width": {
					"type": "integer",
					"minimum": 1
				},
				"precision": {
					"type": "integer",
					"minimum": 0
				},
				"unit": {
					"$ref": "#/definitions/Text"
				}
			},
			"required": [
				"key",
				"precision",
				"unit",
				"width"
			],
			"title": "FormatDefinition",
			"description": "Definition of a specific format for data display"
		},
		"ResourcesCost": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"Samples": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Sample"
					}
				}
			},
			"required": [
				"Samples"
			],
			"title": "ResourcesCost",
			"description": "Resource cost definitions for different samples"
		},
		"Sample": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"sampleId": {
					"$ref": "#/definitions/Names"
				},
				"flows": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Values"
					}
				},
				"processes": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Values"
					}
				}
			},
			"required": [
				"sampleId",
				"flows"
			],
			"title": "Sample",
			"description": "Sample data for resource costs"
		},
		"WasteDefinition": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"wastes": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/Wastes"
					}
				}
			},
			"required": [
				"wastes"
			],
			"title": "WasteDefinition",
			"description": "Definition of waste allocations in the plant model"
		},
		"Wastes": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"flow": {
					"$ref": "#/definitions/Keys"
				},
				"type": {
					"type": "string",
					"enum": [
						"DEFAULT",
						"MANUAL",
						"RESOURCES",
						"EXERGY",
						"COST",
						"IRREVERSIBILITY",
						"HYBRID"
					]
				},
				"recycle": {
					"type": "number",
					"minimum": 0,
					"maximum": 1
				},
				"values": {
					"type": "array",
					"items": {
						"$ref": "#/definitions/WasteAllocation"
					}
				}
			},
			"required": [
				"flow",
				"type"
			],
			"title": "Wastes",
			"description": "Definition of wastes in the plant model"
		},
		"WasteAllocation": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"process": {
					"$ref": "#/definitions/Keys"
				},
				"value": {
					"type": "number",
					"minimum": 0
				}
			},
			"required": [
				"process",
				"value"
			],
			"title": "WasteAllocation",
			"description": "Allocation of waste to a specific process"
		},
		"Values": {
			"type": "object",
			"additionalProperties": false,
			"properties": {
				"key": {
					"$ref": "#/definitions/Keys"
				},
				"value": {
					"type": "number",
					"minimum": 0
				}
			},
			"required": [
				"key",
				"value"
			],
			"title": "Values",
			"description": "Key-value pairs representing values in the plant model"
		},
		"Keys": {
			"type": "string",
			"pattern": "^[A-Z][A-Za-z0-9]{1,7}$",
			"description": "Identifier key for flows and processes"
		},
		"Names": {
			"type": "string",
			"pattern": "^[A-Za-z]\\w{1,9}$",
			"description": "Name identifier for samples"
		},
		"Text": {
            "type": "string",
            "minLength": 2,
			"description": "Textual data with a minimum length of 2 characters"
        }
	}
}